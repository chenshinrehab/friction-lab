<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å°å°ç§‘å­¸å®¶ï¼šæ‘©æ“¦åŠ›å¯¦é©—å®¤</title>
    <style>
        body {
            font-family: 'å¾®è»Ÿæ­£é»‘é«”', sans-serif;
            background-color: #f0f8ff;
            display: flex;
            flex-direction: column;
            align-items: center;
            margin: 0;
            padding: 20px;
        }

        h1 {
            color: #2c3e50;
            text-shadow: 2px 2px 0px #badcff;
        }

        .container {
            background: white;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
            width: 800px;
            max-width: 95%;
            text-align: center;
        }

        /* æ¨¡æ“¬å€ */
        .stage {
            width: 100%;
            height: 250px;
            border: 3px solid #333;
            border-radius: 8px;
            position: relative;
            overflow: hidden;
            margin-bottom: 20px;
            background-color: #e0e0e0;
            transition: background-image 0.5s;
        }

        /* åœ°æ¿æè³ªæ¨£å¼ */
        .floor-ice {
            background: linear-gradient(to bottom, #e3f2fd, #bbdefb);
            border-bottom: 10px solid #90caf9;
        }
        .floor-wood {
            background: repeating-linear-gradient(45deg, #deb887, #deb887 10px, #d2a679 10px, #d2a679 20px);
            border-bottom: 10px solid #8b4513;
        }
        .floor-sandpaper {
            background-color: #808080;
            background-image: radial-gradient(#333 15%, transparent 16%), radial-gradient(#333 15%, transparent 16%);
            background-size: 10px 10px;
            border-bottom: 10px solid #444;
        }

        /* æ»‘å¡Š */
        #block {
            width: 100px;
            height: 100px;
            background-color: #ff6b6b;
            border: 2px solid #c0392b;
            position: absolute;
            bottom: 10px; /* åœ°æ¿é«˜åº¦ */
            left: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
            color: white;
            font-weight: bold;
            border-radius: 5px;
            transition: width 0.3s, height 0.3s; /* è®Šå½¢å‹•ç•« */
        }

        /* å„€è¡¨æ¿ */
        .controls {
            display: flex;
            justify-content: space-around;
            background-color: #fff3cd;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 15px;
            flex-wrap: wrap;
            gap: 10px;
        }

        .control-group {
            text-align: left;
        }

        label {
            font-weight: bold;
            display: block;
            margin-bottom: 5px;
        }

        select, button {
            padding: 8px 15px;
            font-size: 16px;
            border-radius: 5px;
            border: 1px solid #ccc;
        }

        button {
            background-color: #27ae60;
            color: white;
            border: none;
            cursor: pointer;
            font-weight: bold;
            box-shadow: 0 4px 0 #219150;
            transition: transform 0.1s;
        }

        button:active {
            transform: translateY(4px);
            box-shadow: none;
        }

        button:disabled {
            background-color: #95a5a6;
            box-shadow: none;
            cursor: not-allowed;
        }

        /* çµæœé¡¯ç¤º */
        .results {
            display: flex;
            justify-content: space-between;
            margin-top: 10px;
            font-size: 1.2em;
            color: #2c3e50;
        }

        .meter-box {
            background: #ecf0f1;
            padding: 10px 20px;
            border-radius: 8px;
            min-width: 150px;
        }

        .highlight {
            color: #e74c3c;
            font-weight: bold;
        }

        /* æ•™å­¸æç¤º */
        .teacher-note {
            margin-top: 20px;
            padding: 15px;
            background-color: #d1ecf1;
            color: #0c5460;
            border-radius: 8px;
            font-size: 0.95em;
            line-height: 1.6;
            text-align: left;
        }
        
        /* æ¥è§¸é¢ç©é¸é … */
        .area-options {
            display: flex;
            gap: 10px;
        }
        .area-btn {
            padding: 5px 10px;
            border: 2px solid #ccc;
            background: white;
            cursor: pointer;
            border-radius: 5px;
        }
        .area-btn.active {
            border-color: #2980b9;
            background-color: #d6eaf8;
            font-weight: bold;
        }

    </style>
</head>
<body>

    <h1>ğŸ§ª æ‘©æ“¦åŠ›å¯¦é©—å®¤</h1>

    <div class="container">
        <div id="stage" class="stage floor-wood">
            <div id="block">10kg<br>æ–¹å¡Š</div>
        </div>

        <div class="controls">
            <div class="control-group">
                <label>1. é¸æ“‡åœ°æ¿æè³ªï¼š</label>
                <select id="materialSelect" onchange="changeMaterial()">
                    <option value="wood">æœ¨é ­åœ°æ¿ (ä¸­ç­‰æ‘©æ“¦)</option>
                    <option value="ice">å…‰æ»‘å†°é¢ (æ‘©æ“¦åŠ›å°)</option>
                    <option value="sandpaper">ç²—ç³™ç ‚ç´™ (æ‘©æ“¦åŠ›å¤§)</option>
                </select>
            </div>

            <div class="control-group">
                <label>2. æ¥è§¸é¢ç©å¤§å°ï¼š</label>
                <div class="area-options">
                    <div class="area-btn active" onclick="changeArea('small')">å°</div>
                    <div class="area-btn" onclick="changeArea('medium')">ä¸­</div>
                    <div class="area-btn" onclick="changeArea('large')">å¤§</div>
                </div>
            </div>

            <div class="control-group">
                <label>3. é–‹å§‹å¯¦é©—ï¼š</label>
                <button id="pushBtn" onclick="pushBlock()">ç”¨åŠ›æ¨ä¸€ä¸‹ï¼</button>
            </div>
        </div>

        <div class="results">
            <div class="meter-box">
                æ‘©æ“¦åŠ›å¤§å°ï¼š<span id="frictionVal" class="highlight">ä¸­ç­‰</span>
            </div>
            <div class="meter-box">
                æ»‘è¡Œè·é›¢ï¼š<span id="distanceVal" class="highlight">0</span> å…¬å°º
            </div>
        </div>

        <div class="teacher-note">
            <strong>ğŸ’¡ è§€å¯Ÿé‡é»ï¼š</strong>
            <ul style="margin: 5px 0 0 20px;">
                <li>è©¦è©¦çœ‹ä¸åŒçš„æè³ªï¼Œå“ªä¸€ç¨®è®“æ–¹å¡Šåœå¾—æœ€å¿«ï¼Ÿ</li>
                <li><strong>é™·é˜±é¡Œï¼š</strong>ä¿æŒæè³ªä¸è®Šï¼Œåªæ”¹è®Šã€Œæ¥è§¸é¢ç©ã€ï¼ˆæ–¹å¡Šç«™è‘—æˆ–èººè‘—ï¼‰ï¼Œæ»‘è¡Œçš„è·é›¢æœƒæ”¹è®Šå—ï¼Ÿç‚ºä»€éº¼ï¼Ÿ</li>
            </ul>
        </div>
    </div>

    <script>
        const block = document.getElementById('block');
        const stage = document.getElementById('stage');
        const pushBtn = document.getElementById('pushBtn');
        const materialSelect = document.getElementById('materialSelect');
        const frictionDisplay = document.getElementById('frictionVal');
        const distanceDisplay = document.getElementById('distanceVal');
        const areaBtns = document.querySelectorAll('.area-btn');

        // ç‰©ç†åƒæ•¸
        let frictionCoeff = 0.5; // é è¨­æœ¨é ­
        let currentArea = 'small';
        let position = 20; // èµ·å§‹ä½ç½®
        let velocity = 0;
        let isAnimating = false;
        let animationId = null;

        // æè³ªè¨­å®šè³‡æ–™
        const materials = {
            ice: { coeff: 0.1, name: "æ¥µå°", class: "floor-ice" },
            wood: { coeff: 0.5, name: "ä¸­ç­‰", class: "floor-wood" },
            sandpaper: { coeff: 0.9, name: "æ¥µå¤§", class: "floor-sandpaper" }
        };

        // æ”¹è®Šæè³ª
        function changeMaterial() {
            if(isAnimating) return;
            const type = materialSelect.value;
            
            // æ›´æ–°è¦–è¦º
            stage.className = `stage ${materials[type].class}`;
            
            // æ›´æ–°æ•¸æ“š
            frictionCoeff = materials[type].coeff;
            frictionDisplay.innerText = materials[type].name;
            
            resetBlock();
        }

        // æ”¹è®Šæ¥è§¸é¢ç©
        function changeArea(size) {
            if(isAnimating) return;
            currentArea = size;
            
            // æ›´æ–°æŒ‰éˆ•æ¨£å¼
            areaBtns.forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');

            // æ”¹è®Šæ–¹å¡Šå½¢ç‹€ (æ¨¡æ“¬æ¥è§¸é¢ç©è®ŠåŒ–ï¼Œä½†è³ªé‡ä¸è®Š)
            // è³ªé‡æ˜¯ 10kgï¼Œæˆ‘å€‘åªæ˜¯æ”¹è®Šå®ƒçš„æ“ºæ”¾æ–¹å¼ (å¯¬xé«˜)
            if (size === 'small') {
                block.style.width = '60px';
                block.style.height = '140px';
            } else if (size === 'medium') {
                block.style.width = '100px';
                block.style.height = '100px';
            } else {
                block.style.width = '160px';
                block.style.height = '40px';
            }
            
            resetBlock();
        }

        // é‡ç½®
        function resetBlock() {
            position = 20;
            velocity = 0;
            block.style.left = position + 'px';
            distanceDisplay.innerText = '0';
        }

        // æ¨å‹•é‚è¼¯
        function pushBlock() {
            if (isAnimating) return;
            
            isAnimating = true;
            pushBtn.disabled = true;
            resetBlock();

            // åˆå§‹æ¨åŠ›çµ¦äºˆçš„é€Ÿåº¦ (å‡è¨­æ¨åŠ›å›ºå®š)
            velocity = 15; 

            lastTime = performance.now();
            requestAnimationFrame(animate);
        }

        let lastTime = 0;

        function animate(time) {
            // è¨ˆç®—æ™‚é–“å·®
            const deltaTime = (time - lastTime) / 1000; // è½‰ç§’
            lastTime = time;

            if (deltaTime > 0.1) { // é¿å…åˆ‡æ›åˆ†é æ™‚è·³å‹•
                 requestAnimationFrame(animate);
                 return;
            }

            // ç‰©ç†è¨ˆç®—: æ¸›é€Ÿåº¦ = æ‘©æ“¦ä¿‚æ•¸ * é‡åŠ› (ç°¡åŒ–ç‰ˆ)
            // F = ma, f = uN = umg -> ma = umg -> a = ug
            const gravity = 9.8;
            const deceleration = frictionCoeff * gravity * 3; // *3 æ˜¯ç‚ºäº†è®“å‹•ç•«åœ¨è¢å¹•ç¯„åœå…§å¥½çœ‹ä¸€é»

            // æ›´æ–°é€Ÿåº¦
            velocity -= deceleration * deltaTime;

            // å¦‚æœé€Ÿåº¦é‚„å¤§æ–¼0ï¼Œç¹¼çºŒç§»å‹•
            if (velocity > 0) {
                position += velocity * 5; // *5 æ˜¯åƒç´ æ¯”ä¾‹å°º
                
                // é‚Šç•Œæª¢æŸ¥ (ä¸è¦è·‘å‡ºèˆå°)
                if (position > stage.clientWidth - block.offsetWidth) {
                    position = stage.clientWidth - block.offsetWidth;
                    velocity = 0;
                }

                block.style.left = position + 'px';
                
                // æ›´æ–°è·é›¢é¡¯ç¤º (å‡è£è¨ˆç®—çœŸå¯¦è·é›¢)
                let visualDistance = (position - 20) / 50; // æ›ç®—æˆå…¬å°º
                distanceDisplay.innerText = visualDistance.toFixed(2);

                requestAnimationFrame(animate);
            } else {
                // åœæ­¢
                isAnimating = false;
                pushBtn.disabled = false;
            }
        }

        // åˆå§‹åŒ–
        changeMaterial();
    </script>
</body>
</html>
